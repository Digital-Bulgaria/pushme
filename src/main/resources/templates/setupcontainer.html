<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="/fragments/commonheader :: common_header(~{::title},~{::script})">
	
    <title>PushMe - container not found</title>
   
	<script 
		src="/js/rule.js"
		th:src="@{/js/rule.js}">
	</script>
		
</head>

<body>  
    
    <nav 
		th:replace="/fragments/commonnavbar :: common_navbar(~{})" 
		class="navbar navbar-default">
	</nav>
    
    <div class="container-fluid">
    
    	<!-- New rule created -->
    	<div th:if="${newrule}" class="row bottom-margin">
    		<div class="col-md-8 col-md-offset-2">
    			<div class="alert alert-success" role="alert">
    				<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
    				<p class="text-center">
    					<i class="fa fa-check fa-2x" aria-hidden="true"></i> 
    				</p>
    				<p class="text-center">
    					You have successfully created a new rule for your container
    				</p>
    			</div>
    		</div>
    	</div>
    	<!-- EO: New rule created -->
    	
    	<!-- Explanation -->
    	<div th:if="${#lists.isEmpty(container.rules)}" class="row bottom-margin">
    		<div class="col-md-8 col-md-offset-2">
    			<div class="alert alert-success" role="alert">
    				<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
    				<p class="text-center">
    					<i class="fa fa-info-circle fa-2x" aria-hidden="true"></i> 
    				</p>
    				<p>
    					By default your containers answer with HTTP status 200 to incoming requests.
    					The body of the response is not defined by you. This may be insufficient 
    					for testing some of the push notifications - e.g. you may like to return
    					status code of 404 instead and a custom response body. 
    				</p>
    				
    				<p>
    					To customize the behavior of your container you may want to create some
    					rules. The first rule that matches will be executed and the custom response 
    					will be returned. If no rule matches the container will answer with status code 200.
    					Rule creation is easy. 
    				</p>
    			</div>
    		</div>
    	</div>
    	<!-- EO: explanation -->
    	
    	<!-- Create a new rule -->
		<div class="row bottom-margin">
    		<div class="col-md-8 col-md-offset-2">
    		
    			<div class="text-center">     
        				<button 
		    				id="btn_create_rule" 
		    				th:attr="data-ctnr-id=${container.id}"
    						class="btn btn-lg btn-success">
    						<span id="btn_create_container_new"><i class="fa fa-plus fa-lg"></i> New rule</span>
    					</button>
 				</div>
    			
    		</div>
    	</div>
    	<!-- EO: Create a new rule -->
    	
    	<!-- The new rule -->
    	<div class="row bottom-margin">
    		<div class="col-md-8 col-md-offset-2">
    			<div id="new_rule">
    		
    			</div>
    		</div>
    	</div>
    	<!-- EO: The new rule -->
    	
    	<!-- Rule list -->
    	<div th:unless="${#lists.isEmpty(container.rules)}" class="row bottom-margin">
    		<div class="col-md-8 col-md-offset-2">
    			<table class="table">
    				<thead>
    					<tr>
    						<th>#</th>
    						<th>Description</th>
    						<th>Actions</th>
    					</tr>
    				</thead>
    				
    				<tbody>
    					<tr th:each="rule, iterStat : ${container.rules}">
    						<td th:text="${iterStat.count}">1</td>
    						<td th:text="${rule.requestMethod} + ' | ' + ${rule.responseCode}"></td>
    						<td></td>
    					</tr>
    				</tbody>
    				
    			</table>
    		</div>
    	</div>
    	<!-- EO: Rule list -->
    	
    </div>	
</body>
</html>